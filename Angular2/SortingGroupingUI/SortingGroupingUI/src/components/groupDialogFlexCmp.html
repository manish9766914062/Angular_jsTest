<!-- 
    Dialog using FlexGrid for the GroupDescriptors
-->
<div class="modal fade" id="dlgGroupFlex">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button
                    type="button"
                    class="close"
                    data-dismiss="modal"
                    (click)="groupManager.commit(false)">
                    &times;
                </button>
                <h4 class="modal-title">Groups (with grid)</h4>
            </div>
            <div class="modal-body">
                <div>
                    <div class="btn-toolbar" role="toolbar">
                        <div class="btn-group" role="group">
                            <button
                                type="button" 
                                class="btn btn-default"
                                (click)="groupManager.addGroup()">
                                <span class="glyphicon glyphicon-plus"></span> Add Group
                            </button>
                            <button 
                                type="button" 
                                class="btn btn-default"
                                (disabled)="groupManager.groupDescriptions.currentItem == null"
                                (click)="groupManager.removeGroup()">
                                <span class="glyphicon glyphicon-minus"></span> Delete Group
                            </button>
                            <button 
                                type="button" 
                                class="btn btn-default"
                                (disabled)="groupManager.groupDescriptions.currentItem == null"
                                (click)="groupManager.copyGroup()">
                                <span class="glyphicon glyphicon-share"></span> Copy Group
                            </button>
                        </div>
                        <div class="btn-group" role="group">
                            <button 
                                type="button" 
                                class="btn btn-default" 
                                title="Move Up"
                                (disabled)="groupManager.groupDescriptions.currentPosition <= 0"
                                (click)="groupManager.moveGroup(-1)">
                                <span class="wj-glyph-up"></span>
                            </button>
                            <button
                                type="button" 
                                class="btn btn-default" 
                                title="Move Down"
                                (disabled)="groupManager.groupDescriptions.currentPosition >= groupManager.groupDescriptions.itemCount - 1"
                                (click)="groupManager.moveGroup(+1)">
                                <span class="wj-glyph-down"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div>
                    <wj-flex-grid 
                        style="margin-top:4px"
                        [itemsSource]="groupManager.groupDescriptions"
                        [allowDragging]="'None'"
                        [selectionMode]="'Row'"
                        [headersVisibility]="'Column'">
                        <wj-flex-grid-column 
                            header="Group By" 
                            binding="propertyName"
                            [dataMap]="groupManager.properties"
                            width="*">
                        </wj-flex-grid-column>
                    </wj-flex-grid>
                </div>
                <div class="text-right">
                    <button 
                        type="button" 
                        [ngClass]="groupManager.getError() ? 'btn btn-warning' : 'btn btn-primary'"
                        title="{{groupManager.getError()}}"
                        data-dismiss="modal"
                        (click)="groupManager.commit(true)">
                        OK</button>
                    <button 
                        type="button" 
                        class="btn btn-default text-right" 
                        data-dismiss="modal"
                        (click)="groupManager.commit(false)">
                        Cancel</button>
                </div>
            </div>
        </div>
    </div>
</div>
